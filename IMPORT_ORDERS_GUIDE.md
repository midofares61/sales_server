# ุฏููู ุงุณุชูุฑุงุฏ ุงูุทูุจุงุช - ูุธุงู ูุชูุฏู

## ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ ๐ฏ

ุชู ุชุญุฏูุซ ุณูุฑูุจุช `mongo-orders-to-mysql.js` ููุชุถูู:

### 1. **ูุธุงู ุงูุจุญุซ ุงูุฐูู (Fuzzy Matching)**
ูููุน ุชูุฑุงุฑ ุงููุณูููู ูุงูููุงุฏูุจ ูุงูููุชุฌุงุช ุนูุฏ ุงุฎุชูุงู ุงูุฃุณูุงุก ุจุดูู ุจุณูุท.

### 2. **ูุธุงู ุฅุนุงุฏุฉ ุงููุญุงููุฉ (Retry System)**
ูุนูุฏ ุงููุญุงููุฉ ุชููุงุฆูุงู ุนูุฏ ุงููุทุงุน ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช.

### 3. **ุชุฎุทู ุงูุทูุจุงุช ุงูููุฌูุฏุฉ (Skip Existing)**
ูุชุฎุทู ุงูุทูุจุงุช ุงูุชู ุชู ุงุณุชูุฑุงุฏูุง ูุณุจูุงู ููููู ูู ุญูุซ ุชููู.

### 4. **ุชูุงุฑูุฑ ููุตูุฉ (Detailed Reports)**
ูุนุฑุถ ุฅุญุตุงุฆูุงุช ูุงููุฉ ุนู ุนูููุฉ ุงูุงุณุชูุฑุงุฏ.

### ููู ูุนูู ุงููุธุงู ุงูุฐููุ

1. **ุงูุชุทุจูุน (Normalization)**
   - ุฅุฒุงูุฉ ุงููุณุงูุงุช ุงูุฒุงุฆุฏุฉ
   - ุชูุญูุฏ ุงูุญุฑูู ุงููุจูุฑุฉ ูุงูุตุบูุฑุฉ
   - ุชูุธูู ุงูุจูุงูุงุช ุชููุงุฆูุงู

2. **ุงูููุงุฑูุฉ ุงูุฐููุฉ (Fuzzy Matching)**
   - ููุงุฑู ุงูุฃุณูุงุก ุจูุณุจุฉ ุชุดุงุจู
   - ุฅุฐุง ูุงู ุงูุชุดุงุจู ุฃูุจุฑ ูู 85%ุ ูุณุชุฎุฏู ุงูุณุฌู ุงูููุฌูุฏ
   - ูููุน ุฅูุดุงุก ุณุฌูุงุช ููุฑุฑุฉ

### ุฃูุซูุฉ ุนูู ุงูุชุทุงุจู:

| ุงูุงุณู ุงูุฌุฏูุฏ | ุงูุงุณู ุงูููุฌูุฏ | ุงููุชูุฌุฉ |
|-------------|---------------|---------|
| "ูุญูุฏ ุนูู" | "ูุญูุฏ  ุนูู" (ูุณุงูุฉ ุฒุงุฆุฏุฉ) | โ ุชุทุงุจู |
| "ุงุญูุฏ" | "ุฃุญูุฏ" | โ ุชุทุงุจู |
| "ููุชุฌ ุฑูู 1" | "ููุชุฌ ุฑูู1" | โ ุชุทุงุจู |
| "ุนุจุฏุงููู" | "ุนุจุฏ ุงููู" | โ ุชุทุงุจู |
| "ูุญูุฏ" | "ุฃุญูุฏ" | โ ูุง ุชุทุงุจู (ุฅูุดุงุก ุฌุฏูุฏ) |

## ูุธุงู ุฅุนุงุฏุฉ ุงููุญุงููุฉ ูุงูุชุนุงูู ูุน ุงูุงููุทุงุน ๐

### ูุงุฐุง ูุญุฏุซ ุนูุฏ ุงููุทุงุน ุงูุงุชุตุงูุ

1. **ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุงูุชููุงุฆูุฉ**: ูุญุงูู ุฅุนุงุฏุฉ ุงูุงุชุตุงู 3 ูุฑุงุช
2. **ูุชุฑุฉ ุงูุชุธุงุฑ**: 5 ุซูุงูู ุจูู ูู ูุญุงููุฉ
3. **ุชุฎุทู ุงูุทูุจุงุช ุงูููุฌูุฏุฉ**: ุนูุฏ ุฅุนุงุฏุฉ ุงูุชุดุบููุ ูุชุฎุทู ุงูุทูุจุงุช ุงููุณุชูุฑุฏุฉ ูุณุจูุงู
4. **ุงุณุชููุงู ูู ุญูุซ ุชููู**: ูุง ูุนูุฏ ุงุณุชูุฑุงุฏ ููุณ ุงูุทูุจุงุช ูุฑุฉ ุฃุฎุฑู

### ูุซุงู ุนูู ุงูุงููุทุงุน ูุงูุงุณุชููุงู:

```bash
# ุงูุชุดุบูู ุงูุฃูู (ุงููุทุน ุนูุฏ 7200 ุทูุจ)
๐ ุงูุชูุฏู: 7200 / 13124 (55%)
   โ ูุณุชูุฑุฏ: 7150
   โญ๏ธ  ูุชุฎุทู: 50
   โ ุฃุฎุทุงุก: 0
โ ุฎุทุฃ ูู ุงูุงุชุตุงู... ุชููู

# ุฅุนุงุฏุฉ ุงูุชุดุบูู (ูููู ูู 7200)
๐ ุงูุชูุฏู: 13124 / 13124 (100%)
   โ ูุณุชูุฑุฏ: 5924  (ุงูุฌุฏูุฏุฉ ููุท)
   โญ๏ธ  ูุชุฎุทู: 7200  (ุงูุณุงุจูุฉ)
   โ ุฃุฎุทุงุก: 0
```

### ุฅุนุฏุงุฏุงุช ุงูุชุญูู

ููููู ุงูุชุญูู ูู ุงูุฅุนุฏุงุฏุงุช ูู ุฎูุงู ููู `.env`:

```env
# ูุณุจุฉ ุงูุชุดุงุจู ุงููุทููุจุฉ (0.0 ุฅูู 1.0)
# ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ: 0.85 (85%)
SIMILARITY_THRESHOLD=0.85

# ุนุฏุฏ ูุฑุงุช ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุนูุฏ ุงูุฎุทุฃ
# ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ: 3
MAX_RETRIES=3

# ููุช ุงูุงูุชุธุงุฑ ุจูู ุงููุญุงููุงุช (ุจุงููููู ุซุงููุฉ)
# ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ: 5000 (5 ุซูุงูู)
RETRY_DELAY=5000

# ุญุฌู ุงูุฏูุนุฉ (ุนุฏุฏ ุงูุทูุจุงุช ูู ูู ุฏูุนุฉ)
# ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ: 200
IMPORT_BATCH_SIZE=200
```

### ุฑุณุงุฆู ุงูุณูุฑูุจุช

ุนูุฏ ุชุดุบูู ุงูุณูุฑูุจุชุ ุณุชุธูุฑ ุฑุณุงุฆู ุชูุตูููุฉ:

```bash
๐ ุจุฏุก ุงุณุชูุฑุงุฏ ุงูุทูุจุงุช...

โ ุชู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช ุจูุฌุงุญ

๐ฅ ุฌูุจ ุงูุทูุจุงุช ูู ุงููุตุฏุฑ...
โ ุชู ุฌูุจ 13124 ุทูุจ ูู ุงููุตุฏุฑ

โณ ุจุฏุก ุงูุงุณุชูุฑุงุฏ...

๐ฆ ูุนุงูุฌุฉ ุฏูุนุฉ 1 (1 - 200)...
โ ูุฌุฏุช ูุณูู ูุดุงุจู: "ูุญูุฏ ุนูู" โ "ูุญูุฏ  ุนูู"
+ ุฅูุดุงุก ููุฏูุจ ุฌุฏูุฏ: "ุฎุงูุฏ ุฃุญูุฏ"
โ ูุฌุฏุช ููุชุฌ ูุดุงุจู: "ููุชุฌ ุฑูู 1" โ "ููุชุฌ ุฑูู1"

๐ ุงูุชูุฏู: 200 / 13124 (2%)
   โ ูุณุชูุฑุฏ: 190
   โญ๏ธ  ูุชุฎุทู: 10
   โ ุฃุฎุทุงุก: 0

...

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ ุชู ุงูุงูุชูุงุก ูู ุงูุงุณุชูุฑุงุฏ!
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ ุงูุฅุญุตุงุฆูุงุช ุงูููุงุฆูุฉ:
   ุฅุฌูุงูู ุงูุทูุจุงุช: 13124
   โ ุชู ุงุณุชูุฑุงุฏู: 12800
   โญ๏ธ  ุชู ุชุฎุทูู (ููุฌูุฏ ูุณุจูุงู): 300
   โ ุฃุฎุทุงุก: 24
   โฑ๏ธ  ุงูููุช ุงููุณุชุบุฑู: 245.67 ุซุงููุฉ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

๐ ุชู ุฅุบูุงู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
```

### ุงุณุชุฎุฏุงู ุงูุณูุฑูุจุช

```bash
# ุชุดุบูู ุงูุณูุฑูุจุช
npm run import:orders

# ุฃู ูุจุงุดุฑุฉ
node mongo-orders-to-mysql.js
```

## ุฅุนุฏุงุฏุงุช ูุงููุฉ

ููู `.env` ุงููุงูู:

```env
# ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
DB_HOST=localhost
DB_PORT=3306
DB_NAME=sales_db
DB_USER=root
DB_PASSWORD=your_password

# ุฅุนุฏุงุฏุงุช API ุงููุตุฏุฑ
SOURCE_BASE_URL=https://brazele.sintac.shop/api
SOURCE_TOKEN=your_token_here

# ุฅุนุฏุงุฏุงุช ุงูุงุณุชูุฑุงุฏ
IMPORT_BATCH_SIZE=200          # ุญุฌู ุงูุฏูุนุฉ
SIMILARITY_THRESHOLD=0.85       # ูุณุจุฉ ุงูุชุดุงุจู
MAX_RETRIES=3                   # ุนุฏุฏ ุงููุญุงููุงุช
RETRY_DELAY=5000                # ููุช ุงูุงูุชุธุงุฑ (ูููู ุซุงููุฉ)
```

## ุงูููุงุฆุฏ ุงูุฑุฆูุณูุฉ ๐

### ุงูุจุญุซ ุงูุฐูู
โ ููุน ุชูุฑุงุฑ ุงููุณูููู  
โ ููุน ุชูุฑุงุฑ ุงูููุงุฏูุจ  
โ ููุน ุชูุฑุงุฑ ุงูููุชุฌุงุช  
โ ุชูุธูู ุงูุจูุงูุงุช ุชููุงุฆูุงู  

### ุฅุฏุงุฑุฉ ุงูุฃุฎุทุงุก
โ ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุงูุชููุงุฆูุฉ ุนูุฏ ุงูุงููุทุงุน  
โ ุชุฎุทู ุงูุทูุจุงุช ุงูููุฌูุฏุฉ ูุณุจูุงู  
โ ุงุณุชููุงู ูู ุญูุซ ุชููู  
โ ูุนุงูุฌุฉ ูู ุทูุจ ุจุดูู ูููุตู (ุฎุทุฃ ูุงุญุฏ ูุง ูููู ุงูุนูููุฉ)  

### ุงูุชูุงุฑูุฑ ูุงููุฑุงูุจุฉ
โ ุชูุงุฑูุฑ ููุตูุฉ ูู ุงูููุช ุงููุนูู  
โ ุฅุญุตุงุฆูุงุช ุฏูููุฉ ุนู ุงูุชูุฏู  
โ ุนุฑุถ ุงูุฃุฎุทุงุก ุจุดูู ูุงุถุญ  
โ ููุงุณ ุงูููุช ุงููุณุชุบุฑู  

## ููุงุญุธุงุช ูููุฉ โ๏ธ

### ุขููุฉ ุงูุนูู
1. **ุงูุจุญุซ ุงูุฏููู**: ูุจุญุซ ุฃููุงู ุนู ุชุทุงุจู ุฏููู 100%
2. **ุงูุจุญุซ ุงูุฐูู**: ุฅุฐุง ูู ูุฌุฏุ ูุจุญุซ ุนู ุฃุณูุงุก ูุดุงุจูุฉ (85% ุฃู ุฃูุซุฑ)
3. **ุงูุฅูุดุงุก**: ููุท ุฅุฐุง ูู ูุฌุฏ ุฃู ุชุทุงุจูุ ููุดุฆ ุณุฌู ุฌุฏูุฏ
4. **ุงูุชุฎุทู**: ุฅุฐุง ูุงู ุงูุทูุจ ููุฌูุฏุงู (ููุณ order_code)ุ ูุชู ุชุฎุทูู

### ูุตุงุฆุญ ููุงุณุชุฎุฏุงู ุงูุฃูุซู
- ๐น ูู ุจุชุดุบูู ุงูุณูุฑูุจุช ูู ููุช ูุฏูุก ุงููุธุงู ููุญุตูู ุนูู ุฃูุถู ุฃุฏุงุก
- ๐น ุฑุงูุจ ุงูุฑุณุงุฆู ููุชุฃูุฏ ูู ุตุญุฉ ุงูุชุทุงุจูุงุช
- ๐น ุงุญุชูุธ ุจูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุจู ุงูุงุณุชูุฑุงุฏ
- ๐น ูู ุญุงูุฉ ุงูุงููุทุงุนุ ุจุจุณุงุทุฉ ุฃุนุฏ ุชุดุบูู ุงูุณูุฑูุจุช - ุณูููู ูู ุญูุซ ุชููู

### ุงุณุชูุดุงู ุงูุฃุฎุทุงุก
| ุงููุดููุฉ | ุงูุญู |
|---------|------|
| `ECONNRESET` | ุณูุนูุฏ ุงููุญุงููุฉ ุชููุงุฆูุงู - ูุง ุฏุงุนู ููููู |
| `Duplicate order_code` | ุณูุชู ุชุฎุทู ุงูุทูุจ ุงูููุฌูุฏ ุชููุงุฆูุงู |
| ุนุฏุฏ ูุจูุฑ ูู ุงูุฃุฎุทุงุก | ุชุญูู ูู ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู `.env` |
| ุจุทุก ุดุฏูุฏ | ููู `IMPORT_BATCH_SIZE` ุฅูู 100 ุฃู 50 |

## ุงูุฏุนู ูุงูุชุทููุฑ ๐

ูุฃู ุงุณุชูุณุงุฑุงุช ุฃู ูุดุงููุ ุฑุงุฌุน:
- ูููุงุช ุงูุชูุซูู ูู ูุฌูุฏ `docs/`
- ุณุฌูุงุช ุงูุฃุฎุทุงุก ูู `logs/error.log`
- ุณุฌูุงุช ุงููุธุงู ูู `logs/combined.log`

---

**ุชู ุงูุชุญุฏูุซ:** ุฃูุชูุจุฑ 2025  
**ุงูุฅุตุฏุงุฑ:** 2.0 - ูุธุงู ูุชูุฏู ูุน ุงูุจุญุซ ุงูุฐูู ูุฅุนุงุฏุฉ ุงููุญุงููุฉ

