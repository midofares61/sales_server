# Supplier Accounts API

## Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†

ÙŠÙˆÙØ± Ù‡Ø°Ø§ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© ÙƒØ§Ù…Ù„Ø© Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ† Ø¨Ù…Ø§ ÙÙŠ Ø°Ù„Ùƒ:
- ğŸ“¦ **ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø´Ø±Ø§Ø¡**: ØªØ³Ø¬ÙŠÙ„ ÙÙˆØ§ØªÙŠØ± Ø´Ø±Ø§Ø¡ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù…Ù† Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†
- ğŸ’° **Ø§Ù„Ø¯ÙØ¹Ø§Øª**: ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª Ù„Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†
- ğŸ“Š **ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨**: Ø¹Ø±Ø¶ ØªÙØµÙŠÙ„ÙŠ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª
- âš–ï¸ **Ø§Ù„Ø±ØµÙŠØ¯**: ØªØªØ¨Ø¹ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ø±ØµÙŠØ¯ ÙƒÙ„ Ù…ÙˆØ±Ø¯

---

## Ø§Ù„Ù…ÙØ§Ù‡ÙŠÙ… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©

### Ø§Ù„Ø±ØµÙŠØ¯ (Balance)
- **Ù…ÙˆØ¬Ø¨ (+)**: Ù†Ø­Ù† Ù…Ø¯ÙŠÙ†ÙˆÙ† Ù„Ù„Ù…ÙˆØ±Ø¯ (Ù„ÙŠÙ‡ ÙÙ„ÙˆØ³ Ø¹Ù„ÙŠÙ†Ø§)
- **Ø³Ø§Ù„Ø¨ (-)**: Ø§Ù„Ù…ÙˆØ±Ø¯ Ù…Ø¯ÙŠÙ† Ù„Ù†Ø§ (Ø¹Ù„ÙŠÙ†Ø§ ÙÙ„ÙˆØ³ Ù„Ù‡)
- ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±ØµÙŠØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù…Ø¹ ÙƒÙ„ ÙØ§ØªÙˆØ±Ø© Ø£Ùˆ Ø¯ÙØ¹Ø©

### Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª (Transactions)
- **Ù…Ø¯ÙŠÙ† (Debit)**: ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø´Ø±Ø§Ø¡ (ØªØ²ÙŠØ¯ Ø§Ù„Ø±ØµÙŠØ¯)
- **Ø¯Ø§Ø¦Ù† (Credit)**: Ø§Ù„Ø¯ÙØ¹Ø§Øª (ØªÙ‚Ù„Ù„ Ø§Ù„Ø±ØµÙŠØ¯)

---

## 1. Ø¥Ù†Ø´Ø§Ø¡ ÙØ§ØªÙˆØ±Ø© Ø´Ø±Ø§Ø¡

**POST** `/api/supplier-orders`

### Ø§Ù„ÙˆØµÙ
- ÙŠØ³Ø¬Ù„ ÙØ§ØªÙˆØ±Ø© Ø´Ø±Ø§Ø¡ Ù…Ù† Ø§Ù„Ù…ÙˆØ±Ø¯
- ÙŠØ¶ÙŠÙ Ø§Ù„ÙƒÙ…ÙŠØ§Øª Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
- ÙŠØ²ÙŠØ¯ Ø±ØµÙŠØ¯ Ø§Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù‚ÙŠÙ…Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©

### Request Body
```json
{
  "supplier_id": 1,
  "details": [
    {
      "product_id": 5,
      "quantity": 100,
      "price": 50.00
    },
    {
      "product_id": 8,
      "quantity": 50,
      "price": 75.00
    }
  ],
  "notes": "ÙØ§ØªÙˆØ±Ø© Ø´Ø±Ø§Ø¡ Ø´Ù‡Ø± Ø£ÙƒØªÙˆØ¨Ø±",
  "date_time": "2025-10-21T10:00:00.000Z"
}
```

### Response
```json
{
  "success": true,
  "data": {
    "id": 1,
    "supplier_id": 1,
    "total": "8750.00",
    "status": "completed",
    "notes": "ÙØ§ØªÙˆØ±Ø© Ø´Ø±Ø§Ø¡ Ø´Ù‡Ø± Ø£ÙƒØªÙˆØ¨Ø±",
    "date_time": "2025-10-21T10:00:00.000Z",
    "created_by": 1,
    "details": [
      {
        "id": 1,
        "supplier_order_id": 1,
        "product_id": 5,
        "quantity": 100,
        "price": "50.00",
        "total": "5000.00",
        "product": {
          "id": 5,
          "code": "P005",
          "name": "Ù…Ù†ØªØ¬ ØªØ¬Ø±ÙŠØ¨ÙŠ"
        }
      },
      {
        "id": 2,
        "supplier_order_id": 1,
        "product_id": 8,
        "quantity": 50,
        "price": "75.00",
        "total": "3750.00",
        "product": {
          "id": 8,
          "code": "P008",
          "name": "Ù…Ù†ØªØ¬ Ø¢Ø®Ø±"
        }
      }
    ],
    "supplier": {
      "id": 1,
      "name": "Ù…ÙˆØ±Ø¯ Ø§Ù„Ù…Ø±Ø§ØªØ¨",
      "balance": "8750.00"
    }
  },
  "message": "Supplier order created successfully"
}
```

### Ø§Ù„ØªØ£Ø«ÙŠØ±Ø§Øª
- âœ… **Ø§Ù„Ù…Ø®Ø²ÙˆÙ†**: ÙŠØªÙ… Ø²ÙŠØ§Ø¯Ø© ÙƒÙ…ÙŠØ© ÙƒÙ„ Ù…Ù†ØªØ¬ Ø¨Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©
- âœ… **Ø§Ù„Ø±ØµÙŠØ¯**: ÙŠØ²ÙŠØ¯ Ø±ØµÙŠØ¯ Ø§Ù„Ù…ÙˆØ±Ø¯ Ø¨Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ§ØªÙˆØ±Ø©
- âœ… **Ø§Ù„Ø³Ø¬Ù„**: ÙŠØªÙ… Ø­ÙØ¸ Ø§Ù„ÙØ§ØªÙˆØ±Ø© ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…

---

## 2. Ø¹Ø±Ø¶ ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø´Ø±Ø§Ø¡

**GET** `/api/supplier-orders`

### Query Parameters
- `supplier_id` (optional) - ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„Ù…ÙˆØ±Ø¯
- `start_date` (optional) - Ù…Ù† ØªØ§Ø±ÙŠØ®
- `end_date` (optional) - Ø¥Ù„Ù‰ ØªØ§Ø±ÙŠØ®

### Ù…Ø«Ø§Ù„
```
GET /api/supplier-orders?supplier_id=1&start_date=2025-10-01&end_date=2025-10-31
```

### Response
```json
{
  "success": true,
  "data": {
    "orders": [
      {
        "id": 1,
        "supplier_id": 1,
        "total": "8750.00",
        "status": "completed",
        "notes": "ÙØ§ØªÙˆØ±Ø© Ø´Ù‡Ø± Ø£ÙƒØªÙˆØ¨Ø±",
        "date_time": "2025-10-21T10:00:00.000Z",
        "details": [...],
        "supplier": {
          "id": 1,
          "name": "Ù…ÙˆØ±Ø¯ Ø§Ù„Ù…Ø±Ø§ØªØ¨"
        },
        "creator": {
          "id": 1,
          "name": "Admin"
        }
      }
    ],
    "total": 1
  }
}
```

---

## 3. Ø¥Ø¶Ø§ÙØ© Ø¯ÙØ¹Ø© Ù„Ù„Ù…ÙˆØ±Ø¯

**POST** `/api/supplier-payments`

### Ø§Ù„ÙˆØµÙ
- ÙŠØ³Ø¬Ù„ Ø¯ÙØ¹Ø© Ù„Ù„Ù…ÙˆØ±Ø¯
- ÙŠÙ‚Ù„Ù„ Ø±ØµÙŠØ¯ Ø§Ù„Ù…ÙˆØ±Ø¯ Ø¨Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¯ÙØ¹Ø©

### Request Body
```json
{
  "supplier_id": 1,
  "amount": 5000.00,
  "note": "Ø¯ÙØ¹Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø³Ø§Ø¨",
  "date_time": "2025-10-21T12:00:00.000Z"
}
```

### Response
```json
{
  "success": true,
  "data": {
    "id": 1,
    "supplier_id": 1,
    "amount": "5000.00",
    "note": "Ø¯ÙØ¹Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø³Ø§Ø¨",
    "date_time": "2025-10-21T12:00:00.000Z",
    "created_by": 1,
    "supplier": {
      "id": 1,
      "name": "Ù…ÙˆØ±Ø¯ Ø§Ù„Ù…Ø±Ø§ØªØ¨",
      "balance": "3750.00"
    },
    "creator": {
      "id": 1,
      "name": "Admin"
    }
  },
  "message": "Payment added successfully"
}
```

---

## 4. Ø¹Ø±Ø¶ Ø§Ù„Ø¯ÙØ¹Ø§Øª

**GET** `/api/supplier-payments`

### Query Parameters
- `supplier_id` (optional) - ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„Ù…ÙˆØ±Ø¯
- `start_date` (optional) - Ù…Ù† ØªØ§Ø±ÙŠØ®
- `end_date` (optional) - Ø¥Ù„Ù‰ ØªØ§Ø±ÙŠØ®

### Ù…Ø«Ø§Ù„
```
GET /api/supplier-payments?supplier_id=1
```

---

## 5. ÙƒØ´Ù Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ÙˆØ±Ø¯ (Statement)

**GET** `/api/suppliers/:supplier_id/statement`

### Ø§Ù„ÙˆØµÙ
ÙŠØ¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ù…ÙˆØ±Ø¯ (ÙÙˆØ§ØªÙŠØ± + Ø¯ÙØ¹Ø§Øª) Ù…Ø±ØªØ¨Ø© Ø²Ù…Ù†ÙŠØ§Ù‹ Ù…Ø¹ Ø±ØµÙŠØ¯ Ù…ØªØ­Ø±Ùƒ

### Query Parameters
- `start_date` (optional) - Ù…Ù† ØªØ§Ø±ÙŠØ®
- `end_date` (optional) - Ø¥Ù„Ù‰ ØªØ§Ø±ÙŠØ®

### Ù…Ø«Ø§Ù„
```
GET /api/suppliers/1/statement?start_date=2025-10-01&end_date=2025-10-31
```

### Response
```json
{
  "success": true,
  "data": {
    "supplier": {
      "id": 1,
      "name": "Ù…ÙˆØ±Ø¯ Ø§Ù„Ù…Ø±Ø§ØªØ¨",
      "phone": "01234567890",
      "current_balance": 3750.00
    },
    "transactions": [
      {
        "id": 1,
        "type": "order",
        "date_time": "2025-10-21T10:00:00.000Z",
        "amount": 8750.00,
        "debit": 8750.00,
        "credit": 0,
        "notes": "ÙØ§ØªÙˆØ±Ø© Ø´Ù‡Ø± Ø£ÙƒØªÙˆØ¨Ø±",
        "balance": 8750.00,
        "details": [
          {
            "product": {
              "id": 5,
              "code": "P005",
              "name": "Ù…Ù†ØªØ¬ ØªØ¬Ø±ÙŠØ¨ÙŠ"
            },
            "quantity": 100,
            "price": "50.00",
            "total": "5000.00"
          }
        ],
        "created_by": "Admin"
      },
      {
        "id": 1,
        "type": "payment",
        "date_time": "2025-10-21T12:00:00.000Z",
        "amount": 5000.00,
        "debit": 0,
        "credit": 5000.00,
        "note": "Ø¯ÙØ¹Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø³Ø§Ø¨",
        "balance": 3750.00,
        "created_by": "Admin"
      }
    ],
    "summary": {
      "total_orders": 1,
      "total_payments": 1,
      "total_debit": 8750.00,
      "total_credit": 5000.00,
      "net_balance": 3750.00
    }
  }
}
```

### ÙÙ‡Ù… ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨

| Ø§Ù„Ø¹Ù…ÙˆØ¯ | Ø§Ù„ÙˆØµÙ |
|--------|-------|
| **type** | Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©: `order` (ÙØ§ØªÙˆØ±Ø©) Ø£Ùˆ `payment` (Ø¯ÙØ¹Ø©) |
| **debit** | Ù…Ø¯ÙŠÙ† (ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø´Ø±Ø§Ø¡) |
| **credit** | Ø¯Ø§Ø¦Ù† (Ø§Ù„Ø¯ÙØ¹Ø§Øª) |
| **balance** | Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…ØªØ­Ø±Ùƒ Ø¨Ø¹Ø¯ ÙƒÙ„ Ù…Ø¹Ø§Ù…Ù„Ø© |

---

## 6. Ø­Ø°Ù ÙØ§ØªÙˆØ±Ø© (Undo)

**DELETE** `/api/supplier-orders/:id`

### Ø§Ù„ÙˆØµÙ
- ÙŠØ­Ø°Ù Ø§Ù„ÙØ§ØªÙˆØ±Ø©
- ÙŠØ¹ÙŠØ¯ ÙƒÙ…ÙŠØ§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙƒÙ…Ø§ ÙƒØ§Ù†Øª
- ÙŠØ¹ÙŠØ¯ Ø±ØµÙŠØ¯ Ø§Ù„Ù…ÙˆØ±Ø¯

---

## 7. Ø­Ø°Ù Ø¯ÙØ¹Ø© (Undo)

**DELETE** `/api/supplier-payments/:id`

### Ø§Ù„ÙˆØµÙ
- ÙŠØ­Ø°Ù Ø§Ù„Ø¯ÙØ¹Ø©
- ÙŠØ¹ÙŠØ¯ Ø±ØµÙŠØ¯ Ø§Ù„Ù…ÙˆØ±Ø¯

---

## Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª (Permissions)

Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù€ endpoints ØªØªØ·Ù„Ø¨:
- âœ… **Authentication**: ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
- âœ… **Authorization**: ØµÙ„Ø§Ø­ÙŠØ© `admin` ÙÙ‚Ø·

---

## Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

### Ø¬Ø¯ÙˆÙ„ `supplier_orders`
| Column | Type | Description |
|--------|------|-------------|
| id | INT | Ø§Ù„Ù…Ø¹Ø±Ù Ø§Ù„ÙØ±ÙŠØ¯ |
| supplier_id | INT | Ù…Ø¹Ø±Ù Ø§Ù„Ù…ÙˆØ±Ø¯ |
| total | DECIMAL(15,2) | Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ§ØªÙˆØ±Ø© |
| status | ENUM | Ø§Ù„Ø­Ø§Ù„Ø© (completed/pending/cancelled) |
| notes | TEXT | Ù…Ù„Ø§Ø­Ø¸Ø§Øª |
| date_time | DATE | ØªØ§Ø±ÙŠØ® Ø§Ù„ÙØ§ØªÙˆØ±Ø© |
| created_by | INT | Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø°ÙŠ Ø£Ù†Ø´Ø£ Ø§Ù„ÙØ§ØªÙˆØ±Ø© |

### Ø¬Ø¯ÙˆÙ„ `supplier_order_details`
| Column | Type | Description |
|--------|------|-------------|
| id | INT | Ø§Ù„Ù…Ø¹Ø±Ù Ø§Ù„ÙØ±ÙŠØ¯ |
| supplier_order_id | INT | Ù…Ø¹Ø±Ù Ø§Ù„ÙØ§ØªÙˆØ±Ø© |
| product_id | INT | Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ù†ØªØ¬ |
| quantity | INT | Ø§Ù„ÙƒÙ…ÙŠØ© |
| price | DECIMAL(10,2) | Ø³Ø¹Ø± Ø§Ù„ÙˆØ­Ø¯Ø© |
| total | DECIMAL(15,2) | Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ |

### Ø¬Ø¯ÙˆÙ„ `supplier_payments`
| Column | Type | Description |
|--------|------|-------------|
| id | INT | Ø§Ù„Ù…Ø¹Ø±Ù Ø§Ù„ÙØ±ÙŠØ¯ |
| supplier_id | INT | Ù…Ø¹Ø±Ù Ø§Ù„Ù…ÙˆØ±Ø¯ |
| amount | DECIMAL(15,2) | Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¯ÙØ¹Ø© |
| note | TEXT | Ù…Ù„Ø§Ø­Ø¸Ø§Øª |
| date_time | DATE | ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¯ÙØ¹Ø© |
| created_by | INT | Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø°ÙŠ Ø£Ù†Ø´Ø£ Ø§Ù„Ø¯ÙØ¹Ø© |

### Ø¬Ø¯ÙˆÙ„ `suppliers`
| Column | Type | Description |
|--------|------|-------------|
| balance | DECIMAL(15,2) | Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ |

---

## Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙƒØ§Ù…Ù„

### 1. Ø´Ø±Ø§Ø¡ Ù…Ù†ØªØ¬Ø§Øª Ù…Ù† Ù…ÙˆØ±Ø¯
```json
POST /api/supplier-orders
{
  "supplier_id": 1,
  "details": [
    {"product_id": 5, "quantity": 100, "price": 50.00}
  ],
  "notes": "Ø´Ø­Ù†Ø© Ø¬Ø¯ÙŠØ¯Ø©"
}
```
**Ø§Ù„Ù†ØªÙŠØ¬Ø©**: 
- Ø§Ù„Ù…Ø®Ø²ÙˆÙ†: Ù…Ù†ØªØ¬ 5 Ø²Ø§Ø¯ Ø¨Ù…Ù‚Ø¯Ø§Ø± 100
- Ø§Ù„Ø±ØµÙŠØ¯: Ø§Ù„Ù…ÙˆØ±Ø¯ Ø£ØµØ¨Ø­ Ù„Ù‡ 5000 Ø¬Ù†ÙŠÙ‡

### 2. Ø¯ÙØ¹ Ù„Ù„Ù…ÙˆØ±Ø¯
```json
POST /api/supplier-payments
{
  "supplier_id": 1,
  "amount": 3000.00,
  "note": "Ø¯ÙØ¹Ø© Ø¬Ø²Ø¦ÙŠØ©"
}
```
**Ø§Ù„Ù†ØªÙŠØ¬Ø©**: 
- Ø§Ù„Ø±ØµÙŠØ¯: Ø§Ù„Ù…ÙˆØ±Ø¯ Ø£ØµØ¨Ø­ Ù„Ù‡ 2000 Ø¬Ù†ÙŠÙ‡

### 3. Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø­Ø³Ø§Ø¨
```
GET /api/suppliers/1/statement
```
**Ø§Ù„Ù†ØªÙŠØ¬Ø©**: ÙƒØ´Ù Ø­Ø³Ø§Ø¨ ÙƒØ§Ù…Ù„ Ø¨Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª ÙˆØ§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…ØªØ­Ø±Ùƒ
