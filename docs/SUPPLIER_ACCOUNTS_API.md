# Supplier Accounts API

## ูุธุงู ุฅุฏุงุฑุฉ ุญุณุงุจุงุช ุงูููุฑุฏูู

ูููุฑ ูุฐุง ุงููุธุงู ุฅุฏุงุฑุฉ ูุงููุฉ ูุญุณุงุจุงุช ุงูููุฑุฏูู ุจูุง ูู ุฐูู:
- ๐ฆ **ููุงุชูุฑ ุงูุดุฑุงุก**: ุชุณุฌูู ููุงุชูุฑ ุดุฑุงุก ุงูููุชุฌุงุช ูู ุงูููุฑุฏูู
- ๐ฐ **ุงูุฏูุนุงุช**: ุชุณุฌูู ุงููุฏููุนุงุช ููููุฑุฏูู
- ๐ **ูุดู ุงูุญุณุงุจ**: ุนุฑุถ ุชูุตููู ูุฌููุน ุงููุนุงููุงุช
- โ๏ธ **ุงูุฑุตูุฏ**: ุชุชุจุน ุชููุงุฆู ูุฑุตูุฏ ูู ููุฑุฏ

---

## ุงูููุงููู ุงูุฃุณุงุณูุฉ

### ุงูุฑุตูุฏ (Balance)
- **ููุฌุจ (+)**: ูุญู ูุฏูููู ููููุฑุฏ (ููู ูููุณ ุนูููุง)
- **ุณุงูุจ (-)**: ุงูููุฑุฏ ูุฏูู ููุง (ุนูููุง ูููุณ ูู)
- ูุชู ุชุญุฏูุซ ุงูุฑุตูุฏ ุชููุงุฆูุงู ูุน ูู ูุงุชูุฑุฉ ุฃู ุฏูุนุฉ

### ุงููุนุงููุงุช (Transactions)
- **ูุฏูู (Debit)**: ููุงุชูุฑ ุงูุดุฑุงุก (ุชุฒูุฏ ุงูุฑุตูุฏ)
- **ุฏุงุฆู (Credit)**: ุงูุฏูุนุงุช (ุชููู ุงูุฑุตูุฏ)

---

## 1. ุฅูุดุงุก ูุงุชูุฑุฉ ุดุฑุงุก

**POST** `/api/supplier-orders`

### ุงููุตู
- ูุณุฌู ูุงุชูุฑุฉ ุดุฑุงุก ูู ุงูููุฑุฏ
- ูุถูู ุงููููุงุช ููููุชุฌุงุช ุชููุงุฆูุงู
- ูุฒูุฏ ุฑุตูุฏ ุงูููุฑุฏ ุจูููุฉ ุงููุงุชูุฑุฉ

### Request Body
```json
{
  "supplier_id": 1,
  "type": "ูุฑุงุชุจ",
  "details": [
    {
      "product_id": 5,
      "quantity": 100,
      "price": 50.00
    },
    {
      "product_id": 8,
      "quantity": 50,
      "price": 75.00
    }
  ],
  "notes": "ูุงุชูุฑุฉ ุดุฑุงุก ุดูุฑ ุฃูุชูุจุฑ",
  "date_time": "2025-10-21T10:00:00.000Z"
}
```

### ุงูุญููู
- `supplier_id` (required) - ูุนุฑู ุงูููุฑุฏ
- `type` (optional) - ููุน ุงููุงุชูุฑุฉ (ูุต ุญุฑุ ูุซู: ูุฑุงุชุจุ ุงูุณุณูุงุฑุงุชุ ููุงุฏ ุฎุงู)
- `details` (required) - ุชูุงุตูู ุงูููุชุฌุงุช
- `notes` (optional) - ููุงุญุธุงุช
- `date_time` (optional) - ุชุงุฑูุฎ ุงููุงุชูุฑุฉ (ุงูุชุฑุงุถู: ุงูุขู)

### Response
```json
{
  "success": true,
  "data": {
    "id": 1,
    "supplier_id": 1,
    "total": "8750.00",
    "status": "completed",
    "notes": "ูุงุชูุฑุฉ ุดุฑุงุก ุดูุฑ ุฃูุชูุจุฑ",
    "date_time": "2025-10-21T10:00:00.000Z",
    "created_by": 1,
    "details": [
      {
        "id": 1,
        "supplier_order_id": 1,
        "product_id": 5,
        "quantity": 100,
        "price": "50.00",
        "total": "5000.00",
        "product": {
          "id": 5,
          "code": "P005",
          "name": "ููุชุฌ ุชุฌุฑูุจู"
        }
      },
      {
        "id": 2,
        "supplier_order_id": 1,
        "product_id": 8,
        "quantity": 50,
        "price": "75.00",
        "total": "3750.00",
        "product": {
          "id": 8,
          "code": "P008",
          "name": "ููุชุฌ ุขุฎุฑ"
        }
      }
    ],
    "supplier": {
      "id": 1,
      "name": "ููุฑุฏ ุงููุฑุงุชุจ",
      "balance": "8750.00"
    }
  },
  "message": "Supplier order created successfully"
}
```

### ุงูุชุฃุซูุฑุงุช
- โ **ุงููุฎุฒูู**: ูุชู ุฒูุงุฏุฉ ูููุฉ ูู ููุชุฌ ุจุงููููุฉ ุงููุญุฏุฏุฉ
- โ **ุงูุฑุตูุฏ**: ูุฒูุฏ ุฑุตูุฏ ุงูููุฑุฏ ุจุฅุฌูุงูู ุงููุงุชูุฑุฉ
- โ **ุงูุณุฌู**: ูุชู ุญูุธ ุงููุงุชูุฑุฉ ูู ุงููุธุงู

---

## 2. ุนุฑุถ ููุงุชูุฑ ุงูุดุฑุงุก

**GET** `/api/supplier-orders`

### Query Parameters
- `supplier_id` (optional) - ููุชุฑุฉ ุญุณุจ ุงูููุฑุฏ
- `start_date` (optional) - ูู ุชุงุฑูุฎ
- `end_date` (optional) - ุฅูู ุชุงุฑูุฎ

### ูุซุงู
```
GET /api/supplier-orders?supplier_id=1&start_date=2025-10-01&end_date=2025-10-31
```

### Response
```json
{
  "success": true,
  "data": {
    "orders": [
      {
        "id": 1,
        "supplier_id": 1,
        "total": "8750.00",
        "status": "completed",
        "notes": "ูุงุชูุฑุฉ ุดูุฑ ุฃูุชูุจุฑ",
        "date_time": "2025-10-21T10:00:00.000Z",
        "details": [...],
        "supplier": {
          "id": 1,
          "name": "ููุฑุฏ ุงููุฑุงุชุจ"
        },
        "creator": {
          "id": 1,
          "name": "Admin"
        }
      }
    ],
    "total": 1
  }
}
```

---

## 3. ุฅุถุงูุฉ ุฏูุนุฉ ููููุฑุฏ

**POST** `/api/supplier-payments`

### ุงููุตู
- ูุณุฌู ุฏูุนุฉ ููููุฑุฏ
- ูููู ุฑุตูุฏ ุงูููุฑุฏ ุจูููุฉ ุงูุฏูุนุฉ

### Request Body
```json
{
  "supplier_id": 1,
  "amount": 5000.00,
  "type": "ููุฏู",
  "note": "ุฏูุนุฉ ุนูู ุงูุญุณุงุจ",
  "date_time": "2025-10-21T12:00:00.000Z"
}
```

### ุงูุญููู
- `supplier_id` (required) - ูุนุฑู ุงูููุฑุฏ
- `amount` (required) - ูููุฉ ุงูุฏูุนุฉ
- `type` (optional) - ููุน ุงูุฏูุนุฉ (ูุต ุญุฑุ ูุซู: ููุฏูุ ุดููุ ุชุญููู ุจูููุ ููุฒุง)
- `note` (optional) - ููุงุญุธุงุช
- `date_time` (optional) - ุชุงุฑูุฎ ุงูุฏูุนุฉ (ุงูุชุฑุงุถู: ุงูุขู)

### Response
```json
{
  "success": true,
  "data": {
    "id": 1,
    "supplier_id": 1,
    "amount": "5000.00",
    "note": "ุฏูุนุฉ ุนูู ุงูุญุณุงุจ",
    "date_time": "2025-10-21T12:00:00.000Z",
    "created_by": 1,
    "supplier": {
      "id": 1,
      "name": "ููุฑุฏ ุงููุฑุงุชุจ",
      "balance": "3750.00"
    },
    "creator": {
      "id": 1,
      "name": "Admin"
    }
  },
  "message": "Payment added successfully"
}
```

---

## 4. ุนุฑุถ ุงูุฏูุนุงุช

**GET** `/api/supplier-payments`

### Query Parameters
- `supplier_id` (optional) - ููุชุฑุฉ ุญุณุจ ุงูููุฑุฏ
- `start_date` (optional) - ูู ุชุงุฑูุฎ
- `end_date` (optional) - ุฅูู ุชุงุฑูุฎ

### ูุซุงู
```
GET /api/supplier-payments?supplier_id=1
```

---

## 5. ูุดู ุญุณุงุจ ุงูููุฑุฏ (Statement)

**GET** `/api/suppliers/:supplier_id/statement`

### ุงููุตู
ูุนุฑุถ ุฌููุน ูุนุงููุงุช ุงูููุฑุฏ (ููุงุชูุฑ + ุฏูุนุงุช) ูุฑุชุจุฉ ุฒูููุงู ูุน ุฑุตูุฏ ูุชุญุฑู

### Query Parameters
- `start_date` (optional) - ูู ุชุงุฑูุฎ
- `end_date` (optional) - ุฅูู ุชุงุฑูุฎ

### ูุซุงู
```
GET /api/suppliers/1/statement?start_date=2025-10-01&end_date=2025-10-31
```

### Response
```json
{
  "success": true,
  "data": {
    "supplier": {
      "id": 1,
      "name": "ููุฑุฏ ุงููุฑุงุชุจ",
      "phone": "01234567890",
      "current_balance": 3750.00
    },
    "transactions": [
      {
        "id": 1,
        "type": "order",
        "date_time": "2025-10-21T10:00:00.000Z",
        "amount": 8750.00,
        "debit": 8750.00,
        "credit": 0,
        "notes": "ูุงุชูุฑุฉ ุดูุฑ ุฃูุชูุจุฑ",
        "balance": 8750.00,
        "details": [
          {
            "product": {
              "id": 5,
              "code": "P005",
              "name": "ููุชุฌ ุชุฌุฑูุจู"
            },
            "quantity": 100,
            "price": "50.00",
            "total": "5000.00"
          }
        ],
        "created_by": "Admin"
      },
      {
        "id": 1,
        "type": "payment",
        "date_time": "2025-10-21T12:00:00.000Z",
        "amount": 5000.00,
        "debit": 0,
        "credit": 5000.00,
        "note": "ุฏูุนุฉ ุนูู ุงูุญุณุงุจ",
        "balance": 3750.00,
        "created_by": "Admin"
      }
    ],
    "summary": {
      "total_orders": 1,
      "total_payments": 1,
      "total_debit": 8750.00,
      "total_credit": 5000.00,
      "net_balance": 3750.00
    }
  }
}
```

### ููู ูุดู ุงูุญุณุงุจ

| ุงูุนููุฏ | ุงููุตู |
|--------|-------|
| **type** | ููุน ุงููุนุงููุฉ: `order` (ูุงุชูุฑุฉ) ุฃู `payment` (ุฏูุนุฉ) |
| **debit** | ูุฏูู (ููุงุชูุฑ ุงูุดุฑุงุก) |
| **credit** | ุฏุงุฆู (ุงูุฏูุนุงุช) |
| **balance** | ุงูุฑุตูุฏ ุงููุชุญุฑู ุจุนุฏ ูู ูุนุงููุฉ |

---

## 6. ุญุฐู ูุงุชูุฑุฉ (Undo)

**DELETE** `/api/supplier-orders/:id`

### ุงููุตู
- ูุญุฐู ุงููุงุชูุฑุฉ
- ูุนูุฏ ูููุงุช ุงูููุชุฌุงุช ููุง ูุงูุช
- ูุนูุฏ ุฑุตูุฏ ุงูููุฑุฏ

---

## 7. ุญุฐู ุฏูุนุฉ (Undo)

**DELETE** `/api/supplier-payments/:id`

### ุงููุตู
- ูุญุฐู ุงูุฏูุนุฉ
- ูุนูุฏ ุฑุตูุฏ ุงูููุฑุฏ

---

## ุงูุตูุงุญูุงุช (Permissions)

ุฌููุน ุงูู endpoints ุชุชุทูุจ:
- โ **Authentication**: ูุฌุจ ุชุณุฌูู ุงูุฏุฎูู
- โ **Authorization**: ุตูุงุญูุฉ `admin` ููุท

---

## ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฌุฏูู `supplier_orders`
| Column | Type | Description |
|--------|------|-------------|
| id | INT | ุงููุนุฑู ุงููุฑูุฏ |
| supplier_id | INT | ูุนุฑู ุงูููุฑุฏ |
| total | DECIMAL(15,2) | ุฅุฌูุงูู ุงููุงุชูุฑุฉ |
| status | ENUM | ุงูุญุงูุฉ (completed/pending/cancelled) |
| notes | TEXT | ููุงุญุธุงุช |
| date_time | DATE | ุชุงุฑูุฎ ุงููุงุชูุฑุฉ |
| created_by | INT | ุงููุณุชุฎุฏู ุงูุฐู ุฃูุดุฃ ุงููุงุชูุฑุฉ |

### ุฌุฏูู `supplier_order_details`
| Column | Type | Description |
|--------|------|-------------|
| id | INT | ุงููุนุฑู ุงููุฑูุฏ |
| supplier_order_id | INT | ูุนุฑู ุงููุงุชูุฑุฉ |
| product_id | INT | ูุนุฑู ุงูููุชุฌ |
| quantity | INT | ุงููููุฉ |
| price | DECIMAL(10,2) | ุณุนุฑ ุงููุญุฏุฉ |
| total | DECIMAL(15,2) | ุงูุฅุฌูุงูู |

### ุฌุฏูู `supplier_payments`
| Column | Type | Description |
|--------|------|-------------|
| id | INT | ุงููุนุฑู ุงููุฑูุฏ |
| supplier_id | INT | ูุนุฑู ุงูููุฑุฏ |
| amount | DECIMAL(15,2) | ูููุฉ ุงูุฏูุนุฉ |
| note | TEXT | ููุงุญุธุงุช |
| date_time | DATE | ุชุงุฑูุฎ ุงูุฏูุนุฉ |
| created_by | INT | ุงููุณุชุฎุฏู ุงูุฐู ุฃูุดุฃ ุงูุฏูุนุฉ |

### ุฌุฏูู `suppliers`
| Column | Type | Description |
|--------|------|-------------|
| balance | DECIMAL(15,2) | ุงูุฑุตูุฏ ุงูุญุงูู |

---

## ุณููุงุฑูู ุงูุงุณุชุฎุฏุงู ุงููุงูู

### 1. ุดุฑุงุก ููุชุฌุงุช ูู ููุฑุฏ
```json
POST /api/supplier-orders
{
  "supplier_id": 1,
  "details": [
    {"product_id": 5, "quantity": 100, "price": 50.00}
  ],
  "notes": "ุดุญูุฉ ุฌุฏูุฏุฉ"
}
```
**ุงููุชูุฌุฉ**: 
- ุงููุฎุฒูู: ููุชุฌ 5 ุฒุงุฏ ุจููุฏุงุฑ 100
- ุงูุฑุตูุฏ: ุงูููุฑุฏ ุฃุตุจุญ ูู 5000 ุฌููู

### 2. ุฏูุน ููููุฑุฏ
```json
POST /api/supplier-payments
{
  "supplier_id": 1,
  "amount": 3000.00,
  "note": "ุฏูุนุฉ ุฌุฒุฆูุฉ"
}
```
**ุงููุชูุฌุฉ**: 
- ุงูุฑุตูุฏ: ุงูููุฑุฏ ุฃุตุจุญ ูู 2000 ุฌููู

### 3. ูุฑุงุฌุนุฉ ุงูุญุณุงุจ
```
GET /api/suppliers/1/statement
```
**ุงููุชูุฌุฉ**: ูุดู ุญุณุงุจ ูุงูู ุจุฌููุน ุงููุนุงููุงุช ูุงูุฑุตูุฏ ุงููุชุญุฑู
